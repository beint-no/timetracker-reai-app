<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReAI Time Tracker</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@awesome.me/webawesome@3.0.0-beta.6/dist/webawesome.loader.js"></script>

    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="container">
        <wa-card>
            <div class="header">
                <div class="brand">
                    <div class="brand-icon">
                        <wa-icon name="clock"></wa-icon>
                    </div>
                    <div class="brand-text">
                        <h1>ReAI Time Tracker</h1>
                        <p>Professional Time Management</p>
                    </div>
                </div>

                <div class="employee-selector">
                    <label class="label">Team Member</label>
                    <select id="employee-select" onchange="handleEmployeeChange(this)">
                        <option value="">-- Select Employee --</option>
                    </select>
                </div>

                <div class="header-actions">
                    <wa-badge id="token-status" variant="neutral" pill>Checking...</wa-badge>
                    <wa-button variant="success" size="small" id="sync-btn" disabled>
                        <wa-icon name="sync-alt" slot="prefix"></wa-icon>
                        Sync
                    </wa-button>
                    <wa-button variant="neutral" size="small" onclick="logout()">
                        <wa-icon name="sign-out-alt" slot="prefix"></wa-icon>
                        Logout
                    </wa-button>
                </div>
            </div>

            <div id="selected-employee" style="display: none;">
                <wa-divider></wa-divider>
                <div class="employee-box">
                    <div class="emp-label">Currently Tracking</div>
                    <div class="emp-name" id="employee-name"></div>
                    <div class="emp-meta" id="employee-meta"></div>
                </div>
            </div>
        </wa-card>

        <div class="grid">
            <div>
                <wa-card id="timer-section" style="display: none;">
                    <div class="section-head">
                        <div class="icon-box">
                            <wa-icon name="play-circle"></wa-icon>
                        </div>
                        <div class="section-title">
                            <h2>Timer Control</h2>
                            <p>Start and stop</p>
                        </div>
                    </div>

                    <div id="current-timer" class="timer">
                        <div class="empty-icon">
                            <wa-icon name="hourglass-half"></wa-icon>
                        </div>
                        <strong>No active timer</strong>
                        <p style="font-size: 0.875rem; color: #64748b; margin-top: 0.5rem;">Select project to start</p>
                    </div>

                    <div class="field">
                        <label class="label">Project</label>
                        <select id="project-select">
                            <option value="">-- Select --</option>
                        </select>
                    </div>

                    <div class="btn-group">
                        <wa-button variant="brand" size="medium" appearance="filled" onclick="startTimer()">
                            <wa-icon name="play" slot="prefix"></wa-icon>
                            Start Timer
                        </wa-button>
                        <wa-button variant="danger" size="medium" appearance="filled" onclick="stopTimer()">
                            <wa-icon name="stop" slot="prefix"></wa-icon>
                            Stop Timer
                        </wa-button>
                    </div>
                </wa-card>
            </div>

            <div>
                <wa-card id="today-section" style="display: none;">
                    <div class="section-head">
                        <div class="icon-box">
                            <wa-icon name="calendar-day"></wa-icon>
                        </div>
                        <div class="section-title">
                            <h2>Today's Summary</h2>
                            <p>Last 24 hours</p>
                        </div>
                    </div>

                    <div class="stats">
                        <div class="stat">
                            <div class="stat-label">Total Time</div>
                            <div class="stat-value" id="today-total">0h 0m</div>
                        </div>
                        <div class="stat green">
                            <div class="stat-label">Entries</div>
                            <div class="stat-value" id="today-count">0</div>
                        </div>
                    </div>

                    <wa-divider></wa-divider>

                    <div id="today-table-wrapper" style="display: none;">
                        <div class="table-box">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Project</th>
                                        <th>Start</th>
                                        <th>End</th>
                                        <th>Duration</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="today-entries-body"></tbody>
                            </table>
                        </div>
                    </div>

                    <div id="today-placeholder" class="empty">
                        <wa-icon name="sun"></wa-icon>
                        <h3>No Activity Today</h3>
                        <p>Start tracking to see stats</p>
                    </div>
                </wa-card>

                <wa-card id="entries-section" style="display: none;">
                    <div class="section-head">
                        <div class="icon-box">
                            <wa-icon name="list"></wa-icon>
                        </div>
                        <div class="section-title">
                            <h2>All Entries</h2>
                            <p>Complete history</p>
                        </div>
                    </div>
                    <div id="entries-container" class="entries"></div>
                </wa-card>
            </div>
        </div>
    </div>

    <div id="loading" class="loading">
        <div class="loading-content">
            <wa-spinner></wa-spinner>
            <div style="font-weight: 600; color: #475569;">Loading...</div>
        </div>
    </div>

    <wa-callout id="notification" variant="brand" size="small" closable style="display: none; position: fixed; top: 1.5rem; right: 1.5rem; z-index: 10000; min-width: 300px; max-width: 420px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);"></wa-callout>

    <script src="/js/app.js"></script>
</body>
</html>